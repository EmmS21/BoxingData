"use strict";var __awaiter=this&&this.__awaiter||function(e,a,i,s){return new(i||(i=Promise))(function(r,t){function o(e){try{c(s.next(e))}catch(e){t(e)}}function n(e){try{c(s.throw(e))}catch(e){t(e)}}function c(e){e.done?r(e.value):function(r){return r instanceof i?r:new i(function(e){e(r)})}(e.value).then(o,n)}c((s=s.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(t,o){var n,c,a,e,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function r(r){return function(e){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,c&&(a=2&r[0]?c.return:r[0]?c.throw||((a=c.return)&&a.call(c),0):c.next)&&!(a=a.call(c,r[1])).done)return a;switch(c=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,c=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=o.call(t,i)}catch(e){r=[6,e],c=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,e])}}},__await=this&&this.__await||function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=this&&this.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,c=t.apply(e,r||[]),a=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(o){c[o]&&(n[o]=function(t){return new Promise(function(e,r){1<a.push([o,t,e,r])||i(o,t)})})}function i(e,r){try{!function(e){e.value instanceof __await?Promise.resolve(e.value.v).then(s,_):u(a[0][2],e)}(c[e](r))}catch(e){u(a[0][3],e)}}function s(e){i("next",e)}function _(e){i("throw",e)}function u(e,r){e(r),a.shift(),a.length&&i(a[0][0],a[0][1])}};Object.defineProperty(exports,"__esModule",{value:!0});var boxrec_requests_1=require("boxrec-requests"),boxrec_requests_2=require("boxrec-requests"),fs=require("fs"),boxrec_page_champions_1=require("./boxrec-pages/champions/boxrec.page.champions"),boxrec_page_date_1=require("./boxrec-pages/date/boxrec.page.date"),boxrec_page_event_bout_1=require("./boxrec-pages/event/bout/boxrec.page.event.bout"),boxrec_page_event_1=require("./boxrec-pages/event/boxrec.page.event"),boxrec_page_location_event_1=require("./boxrec-pages/location/event/boxrec.page.location.event"),boxrec_page_location_boxer_1=require("./boxrec-pages/location/people/boxrec.page.location.boxer"),boxrec_page_location_people_1=require("./boxrec-pages/location/people/boxrec.page.location.people"),boxrec_page_profile_boxer_1=require("./boxrec-pages/profile/boxrec.page.profile.boxer"),boxrec_page_profile_events_1=require("./boxrec-pages/profile/boxrec.page.profile.events"),boxrec_page_profile_manager_1=require("./boxrec-pages/profile/boxrec.page.profile.manager"),boxrec_page_profile_other_common_1=require("./boxrec-pages/profile/boxrec.page.profile.other.common"),boxrec_page_profile_promoter_1=require("./boxrec-pages/profile/boxrec.page.profile.promoter"),boxrec_page_ratings_1=require("./boxrec-pages/ratings/boxrec.page.ratings"),boxrec_page_schedule_1=require("./boxrec-pages/schedule/boxrec.page.schedule"),boxrec_page_search_1=require("./boxrec-pages/search/boxrec.page.search"),boxrec_search_constants_1=require("./boxrec-pages/search/boxrec.search.constants"),boxrec_page_title_1=require("./boxrec-pages/title/boxrec.page.title"),boxrec_page_titles_1=require("./boxrec-pages/titles/boxrec.page.titles"),boxrec_page_venue_1=require("./boxrec-pages/venue/boxrec.page.venue"),boxrec_page_watch_1=require("./boxrec-pages/watch/boxrec.page.watch");void 0===Symbol.asyncIterator&&(Symbol.asyncIterator=Symbol("asyncIterator"));var Boxrec=function(){function x(){}return x.login=function(r,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,boxrec_requests_1.BoxrecRequests.login(r,t)]})})},x.getBoutById=function(t,o){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getBout(t,o)];case 1:return r=e.sent(),[2,new boxrec_page_event_bout_1.BoxrecPageEventBout(r)]}})})},x.getBoxerPDF=function(r,t,o,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.getBoxerOther(r,t,"pdf",o,n)]})})},x.getBoxerPrint=function(r,t,o,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.getBoxerOther(r,t,"print",o,n)]})})},x.getChampions=function(t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getChampions(t)];case 1:return r=e.sent(),[2,new boxrec_page_champions_1.BoxrecPageChampions(r)]}})})},x.getDate=function(t,o){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getDate(t,o)];case 1:return r=e.sent(),[2,new boxrec_page_date_1.BoxrecPageDate(r)]}})})},x.getEventById=function(t,o){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getEventById(t,o)];case 1:return r=e.sent(),[2,new boxrec_page_event_1.BoxrecPageEvent(r)]}})})},x.getEventsByLocation=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getEvents(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_location_event_1.BoxrecPageLocationEvent(r)]}})})},x.getPeopleByLocation=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getPeople(t,o,n)];case 1:return r=e.sent(),o.role===boxrec_requests_2.BoxrecRole.proBoxer?[2,new boxrec_page_location_boxer_1.BoxrecPageLocationBoxer(r)]:[2,new boxrec_page_location_people_1.BoxrecPageLocationPeople(r)]}})})},x.getPersonById=function(t,o,n,c){return void 0===n&&(n=null),void 0===c&&(c=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getPersonById(t,o,n,c)];case 1:switch(r=e.sent(),n){case boxrec_requests_2.BoxrecRole.proBoxer:return[2,new boxrec_page_profile_boxer_1.BoxrecPageProfileBoxer(r)];case boxrec_requests_2.BoxrecRole.judge:case boxrec_requests_2.BoxrecRole.supervisor:case boxrec_requests_2.BoxrecRole.referee:return[2,new boxrec_page_profile_other_common_1.BoxrecPageProfileOtherCommon(r)];case boxrec_requests_2.BoxrecRole.promoter:return[2,new boxrec_page_profile_promoter_1.BoxrecPageProfilePromoter(r)];case boxrec_requests_2.BoxrecRole.doctor:case boxrec_requests_2.BoxrecRole.inspector:case boxrec_requests_2.BoxrecRole.matchmaker:return[2,new boxrec_page_profile_events_1.BoxrecPageProfileEvents(r)];case boxrec_requests_2.BoxrecRole.manager:return[2,new boxrec_page_profile_manager_1.BoxrecPageProfileManager(r)]}return[2,new boxrec_page_profile_boxer_1.BoxrecPageProfileBoxer(r)]}})})},x.getRatings=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getRatings(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_ratings_1.BoxrecPageRatings(r)]}})})},x.getResults=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getResults(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_schedule_1.BoxrecPageSchedule(r)]}})})},x.getSchedule=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getSchedule(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_schedule_1.BoxrecPageSchedule(r)]}})})},x.getTitleById=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getTitleById(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_title_1.BoxrecPageTitle(r)]}})})},x.getTitles=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getTitles(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_titles_1.BoxrecPageTitles(r)]}})})},x.getVenueById=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getVenueById(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_venue_1.BoxrecPageVenue(r)]}})})},x.getWatched=function(t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.getWatched(t)];case 1:return r=e.sent(),[2,new boxrec_page_watch_1.BoxrecPageWatch(r).list]}})})},x.search=function(t,o,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.search(t,o,n)];case 1:return r=e.sent(),[2,new boxrec_page_search_1.BoxrecPageSearch(r).results]}})})},x.unwatch=function(o,n){return __awaiter(this,void 0,void 0,function(){var r,t;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.unwatch(o,n)];case 1:if(r=e.sent(),t=new boxrec_page_watch_1.BoxrecPageWatch(r).checkForBoxerInList(n))throw new Error("Boxer appears in list after being removed");return[2,!t]}})})},x.watch=function(o,n){return __awaiter(this,void 0,void 0,function(){var r,t;return __generator(this,function(e){switch(e.label){case 0:return[4,boxrec_requests_1.BoxrecRequests.watch(o,n)];case 1:if(r=e.sent(),!(t=new boxrec_page_watch_1.BoxrecPageWatch(r).checkForBoxerInList(n)))throw new Error("Boxer did not appear in list after being added");return[2,t]}})})},x.getPeopleByName=function(c,a,i,s,_,u){return void 0===s&&(s=boxrec_requests_2.BoxrecRole.proBoxer),void 0===_&&(_=boxrec_search_constants_1.BoxrecStatus.all),void 0===u&&(u=0),__asyncGenerator(this,arguments,function(){var r,t,o,n;return __generator(this,function(e){switch(e.label){case 0:return[4,__await(x.search(c,{first_name:a,last_name:i,role:s,status:_},u))];case 1:r=e.sent(),t=0,o=r,e.label=2;case 2:return t<o.length?(n=o[t],[4,__await(x.getPersonById(c,n.id))]):[3,7];case 3:return[4,__await.apply(void 0,[e.sent()])];case 4:return[4,e.sent()];case 5:e.sent(),e.label=6;case 6:return t++,[3,2];case 7:return[2]}})})},x.getBoxerOther=function(c,a,i,s,_){return __awaiter(this,void 0,void 0,function(){var r,t,o,n;return __generator(this,function(e){switch(e.label){case 0:return"pdf"!==i?[3,2]:[4,boxrec_requests_1.BoxrecRequests.getBoxerPDF(c,a)];case 1:return r=e.sent(),[3,4];case 2:return[4,boxrec_requests_1.BoxrecRequests.getBoxerPrint(c,a)];case 3:r=e.sent(),e.label=4;case 4:return s&&(t=void 0,t=_||a+"."+("pdf"===i?"pdf":"html"),"/"!==(o=s).slice(-1)&&(o+="/"),(n=fs.createWriteStream(o+t)).write(r),n.end()),[2,r]}})})},x}();exports.Boxrec=Boxrec;